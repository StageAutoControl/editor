<section fxLayout="row" fxLayoutAlign="center center">
  <mat-card *ngIf="form.value else loading">
    <mat-card-header>
      <mat-card-title>Edit DMXDeviceType</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="form" autocomplete="off" novalidate fxLayout="row wrap" fxLayoutGap.gt-sm="10px">
        <mat-form-field fxFlex>
          <input matInput type="text" placeholder="Name" formControlName="name" id="name">
          <mat-error *ngIf="hasError('name', 'required')">Name is required</mat-error>
        </mat-form-field>

        <div fxFlex="grow" fxLayout="row" fxLayoutGap="10px">
          <mat-form-field fxFlex>
            <input matInput type="number" placeholder="channel count" formControlName="channelCount" id="channelCount">
            <mat-error *ngIf="hasError('channelCount', 'required')">ChannelCount is required</mat-error>
          </mat-form-field>

          <mat-form-field fxFlex>
            <input matInput type="number" placeholder="channels per LED" formControlName="channelsPerLED" id="channelsPerLED">
            <mat-error *ngIf="hasError('channelsPerLED', 'required')">ChannelsPerLED is required</mat-error>
          </mat-form-field>
        </div>

        <div fxFlex fxLayout="row" fxLayoutGap="10px">
          <mat-checkbox fxFlex formControlName="strobeEnabled">strobe enabled</mat-checkbox>
          <mat-form-field fxFlex>
            <input
              matInput
              type="number"
              placeholder="strobe channel"
              formControlName="strobeChannel"
              id="strobeChannel">
            <mat-error *ngIf="hasError('strobeChannel', 'required')">strobe channel is required</mat-error>
          </mat-form-field>
        </div>

        <div fxFlex fxLayout="row" fxLayoutGap="10px">
          <mat-checkbox fxFlex formControlName="dimmerEnabled">dimmer enabled</mat-checkbox>
          <mat-form-field fxFlex>
            <input
              matInput
              type="number"
              placeholder="dimmer channel"
              formControlName="dimmerChannel"
              id="dimmerChannel">
            <mat-error *ngIf="hasError('dimmerChannel', 'required')">dimmer channel is required</mat-error>
          </mat-form-field>
        </div>

        <div fxFlex fxLayout="row" fxLayoutGap="10px">
          <mat-checkbox fxFlex formControlName="modeEnabled">mode enabled</mat-checkbox>
          <mat-form-field fxFlex>
            <input
              matInput
              type="number"
              placeholder="mode channel"
              formControlName="modeChannel"
              id="modeChannel">
            <mat-error *ngIf="hasError('modeChannel', 'required')">mode channel is required</mat-error>
          </mat-form-field>
        </div>

        <div fxFlex="grow">
          <h3>Moving Head</h3>
          <div>
            <mat-checkbox fxFlex="grow" formControlName="moving">is a moving head device</mat-checkbox>
          </div>
        </div>

        <div fxFlex="grow">
          <div fxFlex fxLayout="row" fxLayoutGap="10px">

            <mat-form-field fxFlex>
              <input
                matInput
                type="number"
                placeholder="pan channel"
                formControlName="panChannel"
                id="panChannel">
              <mat-error *ngIf="hasError('panChannel', 'required')">pan channel is required</mat-error>
            </mat-form-field>

            <mat-form-field fxFlex>
              <input
                matInput
                type="number"
                placeholder="tilt channel"
                formControlName="tiltChannel"
                id="tiltChannel">
              <mat-error *ngIf="hasError('tiltChannel', 'required')">tilt channel is required</mat-error>
            </mat-form-field>
          </div>
        </div>

        <div fxFlex="grow">
          <h3>LEDs</h3>
        </div>

        <dmx-led-list-form #ledList fxFlex="grow" [array]="form.controls.leds"></dmx-led-list-form>
      </form>

      {{ form.errors | json }}

    </mat-card-content>
    <mat-card-actions>
      <button mat-button (click)="save()" [disabled]="!form.valid">
        <mat-icon>save</mat-icon> Save
      </button>
      <button mat-button (click)="cancel()">
        <mat-icon>cancel</mat-icon> Cancel
      </button>
    </mat-card-actions>
  </mat-card>

  <ng-template #loading>
    <mat-spinner></mat-spinner>
  </ng-template>
</section>
